{
  "name": "collections/blog/posts/7037e803b754",
  "__resolveType": "blog/loaders/Blogpost.ts",
  "post": {
    "authors": [
      {
        "name": "Rafael Crespo",
        "email": "rafael@decocms.com",
        "jobTitle": "Co-founder",
        "avatar": "https://assets.decocache.com/decocms/d377d0fc-343d-4f45-84aa-c7e1da1beaf0/Luciano-Junior-1.png"
      }
    ],
    "categories": [
      {
        "name": "Product",
        "slug": "product"
      }
    ],
    "imageCarousel": {
      "banners": []
    },
    "extraProps": [],
    "aggregateRating": {
      "@type": "AggregateRating"
    },
    "review": [],
    "contentRating": [],
    "interactionStatistic": {
      "@type": "InteractionCounter",
      "image": null,
      "video": null
    },
    "content": "<blockquote><p><strong><span style=\"font-size: 10pt\">Note:</span></strong><span style=\"font-size: 10pt\"> The workshop recording below is in Portuguese.</span></p></blockquote><p></p><p>In this special \"Build in Public\" session, we partnered with <a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://facamedicina.afya.com.br/\">Afya’s</a> innovation team to tackle a real-world challenge: automating the validation of medical credentials.</p><p></p><p>In just over an hour, we demonstrated how to go from a blank canvas to a functional MVP using the deco, leveraging AI Agents, MCPs (Model Context Protocol), and automated workflows to verify doctor information—a process that is typically manual and time-consuming.</p><p></p><p>&lt;iframe width=\"100%\" height=\"auto\" style=\"aspect-ratio: 16/9\" src=\"https://www.youtube.com/embed/zVQk3REFKDc\" title=\"deco Context\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen&gt;&lt;/iframe&gt;</p><p></p><hr><p></p><h2>Workshop Summary</h2><p></p><p>Here is a breakdown of how the solution was architected and built during the session:</p><p></p><h3>The Challenge</h3><p></p><p>Afya needed a way to streamline the onboarding of doctors. The goal was to create a system where a doctor could submit their data (Name, CPF, CRM, Diploma), and the system would automatically validate these credentials against public databases and ensure compliance, replacing manual checks.</p><p></p><h3>The Primitives</h3><p></p><p>We utilized the core building blocks of deco to build the app:</p><p></p><ul><li><p><strong>AI Agents:</strong> Used to interact with the user (the doctor) via a conversational interface to collect required data.</p></li><li><p><strong>Database (SQLite):</strong> Automatically generated by the AI to store doctor profiles and validation statuses.</p></li><li><p><strong>Tools (MCPs):</strong> Modular functions that allow the AI to interact with external worlds. We used tools for database CRUD operations, Brasil API (for CPF/CNPJ validation), and Gemini Pro Vision (for analyzing diploma images).</p></li><li><p><strong>Workflows:</strong> The logic layer that orchestrates the validation steps (e.g., \"Check CPF\" -&gt; \"Check CRM\" -&gt; \"Analyze Image\" -&gt; \"Update Database\").</p></li><li><p><strong>Views:</strong> A custom UI dashboard generated by AI to allow administrators to view the list of doctors and trigger validation workflows.</p></li></ul><p></p><h3>The Architecture &amp; Workflow</h3><p></p><p>The application follows a streamlined flow:</p><p></p><ol><li><p><strong>Data Collection:</strong> A doctor interacts with an AI Agent via a chat interface. The Agent collects necessary fields (Name, CRM, UF, Diploma URL) and saves them to the database using a Create Doctor Tool.</p></li><li><p><strong>Visual Dashboard:</strong> An administrator accesses a generated Dashboard View that lists all registered doctors with their current status.</p></li><li><p><strong>Automated Validation:</strong> The admin clicks a \"Validate\" button. This triggers a specific Workflow.</p></li><li><p><strong>Execution:</strong> The workflow runs multiple checks in parallel:</p><ul><li><p>Validates format and existence of CPF/CNPJ via API.</p></li><li><p>Analyzes the uploaded Diploma image using Computer Vision to detect if it is a generic template or a valid document.</p></li></ul></li><li><p><strong>Result:</strong> The system saves the validation report back to the database and updates the UI, flagging any suspicious data (e.g., \"Diploma looks like a Freepik template\").</p></li></ol><p></p><hr><p></p><h3>The Prompt</h3><p></p><p>Everything started with a single, well-structured prompt designed to generate the Product Requirements Document (PRD). This prompt guided the AI to understand the business rules, data schemas, and the \"Agentic\" behavior required.</p><p></p><p>Here is the full prompt used to kickstart the application:</p><pre><code>Create a PRD\n\n1. Overview\nDon’t overengineer it, make it simple\nThe system allows doctors to register, have their data stored, and later validated through internal rules and external API checks.\nAn agent collects the data without fabricating any information and saves everything to the database.\nA dashboard allows reviewers to view registered doctors, validate their data, and approve/reject profiles.\n\n2. Goals\n* Allow doctors to submit their professional data.\n* Store information with consistency and security.\n* Use an agent to collect information and save it to the database without hallucinations.\n* Display a general list of registered doctors.\n* Allow manual validation triggered by a button (“Validate”).\n* Allow approval or rejection after analysis.\n\n3. User Flow (MVP)\n1. The doctor talks to the Agent and sends their data.\n2. The agent uses the Create Doctor Tool to save the data to the database.\n3. The agent confirms that the data has been received and is under review.\n4. The reviewer opens the Dashboard and sees the list of doctors.\n5. The reviewer clicks Validate → the system runs validations.\n6. The system generates a validation report.\n7. The reviewer clicks Approve or Reject.\n\n4. Required Information\nName (required)\nCPF (required)\nCNPJ (required)\nCRM (required)\nCRM-UF (required)\nDiploma file (URL) (required)\nRQE (non required)\nSpecialty (non required)\n\n5. Validation Rules\nCRM\n* Check character length.\n* Ensure it contains only numbers.\n* Validate UF (SP, RJ, MG, etc.).\nRQE (optional)\n* Check length.\n* Validate numeric format.\nDiploma\n* Validate that a URL was provided.\n* Validate that the file is not a template.\nCNPJ (via DataJud MCP)\n* Confirm existence.\n* Check if active.\n* Check if not under judicial process.\n* Check if it belongs to the medical sector.\nCPF (via Brazil API MCP)\n* Validate format.\n* Fetch official data.\n* Confirm that the CPF name matches the CRM name (via CFM).\n\n6. System Components (MVP)\nTools\n* Create Doctor Tool: Saves data received from the form or agent.\n* Get Doctors List Tool: Returns registered doctors.\n* Update Doctor Tool: Updates validation results and status (approve/reject).\n* Validate CPF Tool\n* Validate CNPJ Tool\n* Validate CRM Tool\n* Validate Doctor Workflow: Will run complete validations.\nWill runs validate CPF, cnpj, crm tool\n\n7. Database Schema (MVP)\ndoctors table\nID - UUID\nName - String\nCPF - String\nCNPJ - String\nCRM - String\nCRM_UF - String\nDiploma_URL - String\nRQE - String?\nIf not send save a empty string\nspecialty - String? If not send save a empty string\n\nValidations table\nid - UUID\nDoctorID - doctor_id\nStatus - string (pending, reproved, accepted)\nvalidation_report - string\n\n8. AI Agent Requirements\nResponsibilities\n* Talk with the doctor and collect data.\n* Do not invent any information.\n* Save using the Create Doctor Tool.\n* Confirm that the information is under analysis.\nLimitations\n* Does not perform validations at this stage.\n\n9. Dashboard (MVP)\nList View\n* Name\n* CRM + UF\n* CPF\n* Status\n* Validate button\n* View Details button\nValidation\n* When clicking Validate:\n    * Runs workflows with validation rules\n    * Generates validation report, e.g.:\n\n\"{\n  crm: valid,\n  crm_uf: valid,\n  cpf: valid,\n  cpf_name_match: invalid,\n  cnpj: valid,\n  diploma: valid,\n  rqe: not_provided\n}”\nActions\n* Approve\n* Reject\n\n10. Status Lifecycle\npending → in_review → validated → approved/rejected</code></pre><p></p><hr><p></p><h3>Live Debugging</h3><p></p><p>One of the most valuable aspects of \"Build in Public\" is seeing that <strong>AI development isn't magic—it's still software engineering</strong>. After creating the validation workflow, the team hit a snag: the validation was running, but the dashboard wasn't updating.</p><p></p><ul><li><p><strong>The Bug:</strong> By checking the logs, the team realized the AI Agent had successfully run the validation logic but simply \"forgot\" to include a step to save the results back to the database.</p></li><li><p><strong>The Fix</strong>: Instead of rewriting code manually, Ventura instructed the agent: \"Now save the result in the validations table\".</p></li><li><p><strong>The Result</strong>: The agent corrected the workflow, created a Validations Create tool, and successfully stored the data. This highlighted the platform's ability to self-correct through natural language iteration.</p></li></ul><p></p><h3>Computer Vision</h3><p></p><p>Once the debugging was complete, the true power of the multi-modal agent shined. We tested the system with a fake doctor profile using a generic certificate image found online.</p><p></p><p>The <strong>Gemini Pro Vision</strong> tool analyzed the uploaded diploma URL and returned a verdict: \"Suspect: Generic template\". The AI explicitly noted that the diploma appeared to be a design from \"Freepik,\" successfully flagging a potential fraud without any manual rule-coding.</p><p></p><h3>The Strategy</h3><p></p><p>The workshop concluded with a critical discussion on how to take this from a \"Vibe Coding\" session to a secure, enterprise-grade application for a company like Afya.</p><p></p><ul><li><p><strong>The \"MCP Mesh\":</strong> We introduced the concept of an organizational \"Mesh.\" Instead of business users building everything from scratch, technical teams (Context Engineers) expose secure APIs and data via MCPs. Business users (AI Builders) then use these pre-approved blocks to build tools.</p></li><li><p><strong>Governance &amp; Git-Based Deploy: </strong>Unlike low-code tools that trap you in a \"black box,\" the solution shown is Git-based. This means every change created by the AI is versioned, reviewable via Pull Requests, and capable of instant rollback—meeting the strict security requirements of a large healthcare enterprise.</p></li></ul><p></p><hr><p></p><h3>Final Verdict</h3><p></p><p>The session wrapped up with the Afya team validating the approach. They highlighted that while they have internal data lakes and teams, the bottleneck is often the agility to build front-end interfaces and workflows for specific business units.</p><p></p><blockquote><p style=\"text-align: justify\">\"I was already a fan, now I'm even more of a fan... It solves many pains regarding agility and MVP development prepared for deep integration with our ecosystem.\" — Eduardo Moura, Afya</p></blockquote>",
    "title": "Build in Public: Medical Validation System (deco & Afya)",
    "excerpt": "In this 'Build in Public' session, we partnered with Afya to build a Medical Validation System from scratch. Watch how we used AI Agents, MCPs, and Computer Vision to automate doctor credential verification in under 90 minutes.",
    "date": "2025-11-26",
    "slug": "build-in-public-afya-medical-validation-system",
    "seo": {
      "title": "Build in Public: Medical Validation System (deco & Afya)",
      "description": "In this 'Build in Public' session, we partnered with Afya to build a Medical Validation System from scratch. Watch how we used AI Agents, MCPs, and Computer Vision to automate doctor credential verification in under 90 minutes.",
      "image": "https://assets.decocache.com/decocms/fdb9aadc-116c-4735-867c-7a67d52094ff/SEO-Image.png"
    },
    "image": "https://assets.decocache.com/decocms/6fd4292b-3c87-481b-8950-9b17ff48e45f/Blog-Cover.png"
  }
}